#summary Manual data publishing to the archiver

= Manual data publication =

The sMAP library ordinarily takes care of reliably sending data to the archiver backend; however it's sometimes desirable to add data using some other source.  You can do this using an HTTP POST with a properly formatted JSON object in the body.  The sMAP specification contains the necessary details for doing this; here are some simple examples.

If you have an API key, you can add data by POST'ing to the archiver's url `/add/<key>`.  A simple example would be a POST of this file:

{{{
{
  "/sensor0" : {
    "Metadata" : {
      "SourceName" : "Test Source",
      "Location" : { "City" : "Berkeley" }
    },
    "Properties": {
      "Timezone": "America/Los_Angeles", 
      "UnitofMeasure": "Watt", 
      "ReadingType": "double"
    },
    "Readings" : [[1351043674000, 0], [1351043675000, 1]],
    "uuid" : "d24325e6-1d7d-11e2-ad69-a7c2fa8dba61"
  }      
}
}}}

A few notes:
  # `/sensor0` is the resource path of the sensor on the sMAP server.  You can make something sensible up if you're not actually running a web server.
  # The `Metadata/SourceName` field is needed if you want your time series to show up in the powerdb2 plotter; other than that, all of `Metadata` is optional.
  # Valid `ReadingTypes` are `double` and `long`; the timezone determines the conversion to be used for display times.
  # `Readings` can consist of any number of (timestamp, value) arrays.  The timestamps should be UTC milliseconds.  Readings are currently truncated to 1-second resolution.
  # The `uuid` should be globally unique for each timeseries.  Use an appropriate algorithm to generate them.
  # In order to add data, only the `uuid` and `Readings` fields are needed; you can only send the metadata fields occasionally (ie, on startup) to reduce the amount of data sent.